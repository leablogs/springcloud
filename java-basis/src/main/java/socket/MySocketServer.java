package socket;import com.sun.jmx.snmp.tasks.ThreadService;import lombok.extern.slf4j.Slf4j;import org.apache.tomcat.jni.Time;import threads.pool.MyFixedThreadPool;import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.ServerSocket;import java.net.Socket;import java.util.Queue;import java.util.concurrent.*;import java.util.concurrent.atomic.AtomicInteger;@Slf4jpublic class MySocketServer {    public static void main(String[] args) throws IOException, InterruptedException {        int port = 20333;        ServerSocket serverSocket = new ServerSocket(port);//        ExecutorService executorService = Executors.newFixedThreadPool(10);        MyExecutorPool myExecutorPool = new MyExecutorPool("socket-server");        ThreadPoolExecutor executorService = myExecutorPool.startExecutor();//        while (true) {//        byte[] bytes = new byte[1024];//            Socket socket = serverSocket.accept();//            InputStream inputStream = socket.getInputStream();//            OutputStream outputStream = socket.getOutputStream();//            int len;//            StringBuilder stringBuilder = new StringBuilder();//            while ((len = inputStream.read(bytes)) != -1) {//                stringBuilder.append(new String(bytes, 0, len, "UTF-8"));//            }//            log.info("get message from client:{}", stringBuilder);//            outputStream.write("Hello ,I get message.".getBytes("UTF-8"));//            Thread.sleep(10000);//            inputStream.close();//            outputStream.close();//            socket.close();//        }        while (true) {            Socket socket = serverSocket.accept();            Runnable runnable = () -> {                try {                    InputStream inputStream = socket.getInputStream();                    byte[] bytes = new byte[1024];                    int len;                    StringBuilder stringBuilder = new StringBuilder();                    while ((len = inputStream.read(bytes)) != -1) {                        stringBuilder.append(new String(bytes, 0, len, "UTF-8"));                    }                    log.info("从客户端接收到的消息内容：{}", stringBuilder);                    inputStream.close();                    socket.close();                } catch (IOException e) {                    e.printStackTrace();                }            };            executorService.submit(runnable);        }    }}